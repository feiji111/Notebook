# 服务器规范使用手册

# 1.  目前实验室服务器概况

目前实验室一共有4台GPU服务器：

| 概况          | IP             | 特点                          |
| ------------- | -------------- | ----------------------------- |
| 8xA6000x48GB  | 202.120.87.92  | 大显存，有SSD，适合处理大模型 |
| 8x3080Tix12GB | 202.120.87.151 |                               |
| 4xTitan       | 202.120.87.117 |                               |
| 4x3090        | 172.23.148.48  |                               |

# 2. 各台服务器详细情况

## 2.1 A6000

### 2.1.1 GPU

A6000服务器GPU配置是8卡A6000，每张卡48GB的显存，下面是A6000与4090的对比，可以对A6000这张卡有一个直观的印象

|                  | RTX A6000           | RTX 4090            |
| ---------------- | ------------------- | ------------------- |
| Memory           | 48GB                | 24 GB               |
| FP16             | 38.71 TFLOPS (1:1)  | 82.58 TFLOPS (1:1)  |
| FP32             | 38.71 TFLOPS        | 82.58 TFLOPS        |
| FP64             | 604.8 GFLOPS (1:64) | 1,290 GFLOPS (1:64) |
| Memory Bandwidth | 768.0 GB/s          | 1.01 TB/s           |

从整体上来看，算力方面A6000是比不过4090的，A6000唯一的优势就在于显存大。



### 2.1.2 CPU

相比于GPU，CPU方面一般跑实验的时候很少关注。但是有的时候跑实验过程中，性能瓶颈很可能出现在CPU上面。所以还是需要了解一下CPU的。

A6000服务器上是双路Intel(R) Xeon(R) Gold 6240C CPU @ 2.60GHz CPU。每块CPU 18C36T，一共72线程。

这块CPU总体性能个人认为非常差。



### 2.1.3 存储

目前A6000服务器上一共有两块硬盘。

/dev/sda这一块硬盘型号是ST18000NM000J-2T，是希捷的18T机械硬盘；/dev/sdb这一块硬盘型号是SAMSUNG MZ7L37T6，是三星的7.68T的SSD。

机械硬盘下面没有分区，而SSD下有三个分区。

/home/data目录是挂载到这块固态硬盘上的，并且剩余空间非常充足；而/data目录以及根目录/则是挂载在机械硬盘上的。



### 2.1.4 内存

A6000服务器上的总内存有527GB。



### 2.1.5 目录结构以及功能

A600下的目录结构如下

```

/
├── bin -> usr/bin
├── boot
├── cdrom
├── data 数据存放目录，之前是按照每一个用户创建一个数据目录单独存放；现在为了避免重复下载数据集所有数据都存在这个目录下，用户不再私开文件夹
├── data1 空目录，待删除
├── dev
├── etc
├── home 每个用户在home下有一个自己的私有目录
			├── bangwei
      ├── chengqian
      ├── chonghuang
      ├── data 这个目录是由于之前home盘一直爆满，所以另外起了这个目录挂在在一个单独的硬盘上
      ├── huangwx
      ├── jbh
      ├── liaojincheng
      ├── minorant
      ├── qjb
      ├── tyt
      ├── ubuntu
      ├── wangrq
      ├── wrq
      ├── wzh
      └── zyq
├── lib -> usr/lib
├── lib32 -> usr/lib32
├── lib64 -> usr/lib64
├── libx32 -> usr/libx32
├── lost+found
├── media
├── mnt
├── opt
├── proc
├── root
├── run
├── sbin -> usr/sbin
├── snap
├── srv
├── swapfile
├── sys
├── tmp
├── usr
└── var
```

剩下的目录基本不会涉及到，最关键的就是/home以及/data目录。



## 2.2 3080Ti

有时间再写



## 2.3 3090

有时间再写



## 2.4 Titan RTX

有时间再写

# 3. 日常使用

## 3.1 用户创建

如果需要在



## 3.2 连接服务器

一种方式是通过终端直接ssh连接。





## 3.3 虚拟环境管理

之前各个服务器管理python环境大多是通过anaconda虚拟环境管理，这样的管理方式会带来的问题是，每个用户都是通过anaconda.sh这个脚本将anaconda安装在自己的HOME路径下，而不是全局共享：

1. 一方面导致anaconda有多个副本，浪费存储资源
2. 不同的anaconda虚拟环境，往往都是依赖一些共同的库(比如PyTorch等)。因此不同用户的创建的虚拟环境很大一部分依赖其实是可以共享的。但是由于每个用户都是自己安装的anaconda，然后通过conda create创建环境，这就导致安装许多重复的库，极大浪费了存储资源
3. 当用户的HOME路径更改时，anaconda的迁移非常不方便



针对上面的问题，下面是我这里提出的几种解决方案：

1. **抛弃anaconda采用docker**：这种方案是最推荐使用的，并且是目前绝大多数企业都在采用的方案，但是门槛较高需要熟悉容器的概念以及docker的使用。
2. **继续使用anaconda**：

## 3.4 数据集管理

前面提到了，现在所有数据集都放在/data目录下，不要在/data下私自创建个人目录。这样不同的用户之间可以共享。



## 3.5 关于权限



# 4. 一些参考资料



# 5. 训练加速



# 6. 后续需要解决的

A6000服务器上安装的系统是Ubuntu Desktop，存在一个桌面环境。有必要的话安装Ubuntu Server版本或者Debian，这样服务器会更稳定。

